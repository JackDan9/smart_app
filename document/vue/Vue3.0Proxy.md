# Vue3.0-Proxy

## 为什么Vue3.0采用了Proxy, 抛弃了Object.defineProperty()?

- Object.defineProperty本身有一定的监控数组下标变化的能力, 但是在Vue中, 从性能/体验的性价比考虑, 尤大大就弃用了这个特性。为了解决这个问题，经过vue内部处理后可以使用以下几种方法来监听数组。

``` javascript
push();
pop();
shift();
unshift();
splice();
sort();
reverse();
```

- **注**: Object.defineProperty() 方法会直接在一个对象上定义一个新属性，或者修改一个对象的现有属性，并返回此对象。
- **备注**：应当直接在 Object 构造器对象上调用此方法，而不是在任意一个 Object 类型的实例上调用。

- Object.defineProperty()只能劫持对象的属性, 因此我们需要对每个对象的每个属性进行遍历。
- Vue 2.x里，是通过 递归 + 遍历data对象来实现对数据的监控的, 如果属性值也是对象那么需要深度遍历，显然如果能劫持一个完整的对象才是更好的选择。
- Proxy可以劫持整个对象, 并返回一个新的对象。Proxy不仅可以代理对象, 还可以代理数组。还可以代理动态增加的属性。

## Proxy的认识
### 概述
- Proxy用于修改某些操作的默认行为, 等同于在语言层面做出修改, 所以属于一种"元编程"(meta programming), 即对变成语言进行编程。
- Proxy可以理解成, 在目标对象之前架设一层"拦截", 外界对该对象的访问, 都必须先通过这层拦截，因此提供了一种机制, 可以对外界的访问进行过滤和改写。Proxy这个词的愿意是代理, 用在这里表示由它"代理"某些操作, 可以译为"代理器"。

```

```